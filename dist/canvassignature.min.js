!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cavnassignature",e):(t="undefined"!=typeof globalThis?globalThis:t||self).cavnassignature=e()}(this,function(){"use strict";function e(t,e,n){var o=t.length,l=[];for(e=r(o,e),n=r(o,n,o);e<n;)l.push(t[e++]);return l}function r(t,e,n){return e=null==e?n||0:e<0?Math.max(t+e,0):Math.min(e,t)}function o(n,o,l){!function(t,e,n){for(var o in t)if(!1===e.call(n,t[o],o,t))break}(n,function(t,e){if(a.call(n,e))return o.call(l,n[e],e,n)})}function n(n,t){return null==n?{}:(function(t,e,n){if(null!=t)for(var o=t.length,l=-1;++l<o;){var r=t[l];if(!1===e.call(n,r,l,t))break}}(e(arguments,1),function(t){var e;null!=(e=t)&&"object"==typeof e&&!1===Array.isArray(e)&&o(t,function(t,e){null==n[e]&&(n[e]=t)})}),n)}var a=Object.prototype.hasOwnProperty,t=n;t.immutable=function(){var t=e(arguments);return n.apply(null,[{}].concat(t))};const l=(t,e)=>{let n=t.querySelector("canvas");return null!==n?(e.trim?(t=>{for(var e,n,o=t.getContext("2d"),l=document.createElement("canvas").getContext("2d"),r=o.getImageData(0,0,t.width,t.height),a=r.data.length,u={top:null,left:null,right:null,bottom:null},i=0;i<a;i+=4)0!==r.data[i+3]&&(e=i/4%t.width,n=~~(i/4/t.width),null===u.top&&(u.top=n),(null===u.left||e<u.left)&&(u.left=e),(null===u.right||u.right<e)&&(u.right=e),(null===u.bottom||u.bottom<n)&&(u.bottom=n));if(null===u.left||null===u.right||null===u.top||null===u.bottom)return t;var c=u.bottom-u.top,s=u.right-u.left,o=o.getImageData(u.left,u.top,s,c);return l.canvas.width=s,l.canvas.height=c,l.putImageData(o,0,0),l.canvas})(n):n).toDataURL():null};var u=(n,o)=>(o=t(o,{width:200,height:120,trim:!0,strokeWidth:2,strokeColor:"black"}),n&&Array.prototype.forEach.call(n.length?n:[n],t=>{((t,r)=>{if(null!==t&&"div"===t.nodeName.toLowerCase()){let n=document.createElement("canvas"),e=n.getContext("2d"),o=!1,l={};const a=t=>{t.preventDefault(),o=!0,l=c(t)},u=t=>{t.preventDefault(),o=!1},i=t=>{o&&(t=c(t),e.lineWidth=r.strokeWidth,e.strokeStyle=r.strokeColor,e.moveTo(l.x,l.y),e.lineTo(t.x,t.y),e.stroke(),l=t)},c=t=>{let e={};return t.targetTouches&&t.targetTouches.length&&(e.x=t.targetTouches[0].clientX-n.offsetLeft,e.y=t.targetTouches[0].clientY-n.offsetTop),t.clientX&&t.clientY&&(e.x=t.pageX-n.offsetLeft,e.y=t.pageY-n.offsetTop),e};t.appendChild(n),n.className="canvasSignature",n.width=r.width,n.height=r.height,n.style="overscroll-behavior-y: contain;",n.addEventListener("touchstart",a,{passive:!1}),n.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",u),n.addEventListener("mousedown",a),n.addEventListener("mousemove",i),document.addEventListener("mouseup",u)}})(t,o)}),{clear:()=>{Array.prototype.forEach.call(n.length?n:[n],t=>{(t=>{let e=t.querySelector("canvas");null!==e&&(e.width=e.width)})(t)})},getSignatures:()=>{let e=[];return Array.prototype.forEach.call(n.length?n:[n],t=>{e.push(l(t,o))}),e},getSignature:()=>{var t=n.length?n:[elemen];return l(t[0],o)},destroy:()=>{Array.prototype.forEach.call(n.length?n:[n],t=>{(t=>{let e=t.querySelector("canvas");null!==e&&e.remove()})(t)})}});return window.CanvasSignature=u});