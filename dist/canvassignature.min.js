!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cavnassignature",t):(e="undefined"!=typeof globalThis?globalThis:e||self).cavnassignature=t()}(this,function(){"use strict";function t(e,t,n){var r=e.length,a=[];for(t=l(r,t),n=l(r,n,r);t<n;)a.push(e[t++]);return a}function l(e,t,n){return t=null==t?n||0:t<0?Math.max(e+t,0):Math.min(t,e)}function r(n,r,a){!function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}(n,function(e,t){if(o.call(n,t))return r.call(a,n[t],t,n)})}function n(n,e){return null==n?{}:(function(e,t,n){if(null!=e)for(var r=e.length,a=-1;++a<r;){var l=e[a];if(!1===t.call(n,l,a,e))break}}(t(arguments,1),function(e){var t;null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t)&&r(e,function(e,t){null==n[t]&&(n[t]=e)})}),n)}var o=Object.prototype.hasOwnProperty,a=n;a.immutable=function(){var e=t(arguments);return n.apply(null,[{}].concat(e))};var e=(e,t)=>(t=a(t,{width:600,height:600}),e&&Array.prototype.forEach.call(e.length?e:[e],e=>{((a,l)=>{if(null!==a&&"div"===a.nodeName.toLowerCase()){let e=document.createElement("canvas"),t=e.getContext("2d"),n=!1,r={};const o=e=>{e.preventDefault(),n=!0,r=c(e)},i=e=>{e.preventDefault(),n=!1,r=c(e)},u=e=>{n&&(e.preventDefault(),e=c(e),t.moveTo(r.x,r.y),t.lineTo(e.x,e.y),t.stroke(),r=e)},c=e=>{let t={};return e.targetTouches&&e.targetTouches.length&&(t.x=e.targetTouches[0].clientX,t.y=e.targetTouches[0].clientY),e.clientX&&e.clientY&&(t.x=e.clientX,t.y=e.clientY),t};a.appendChild(e),e.className="canvasSignature",e.width=l.width,e.height=l.height,e.style="overscroll-behavior-y: contain;",e.addEventListener("touchstart",o,{passive:!1}),e.addEventListener("touchmove",u,{passive:!1}),e.addEventListener("touchend",i),e.addEventListener("mousedown",o),e.addEventListener("mousemove",u),e.addEventListener("mouseup",i)}})(e,t)}),{clear:()=>{Array.prototype.forEach.call(e.length?e:[e],e=>{(e=>{let t=e.querySelector("canvas");null!==t&&(t.width=t.width)})(e)})},getSignature:()=>{let t=[];return Array.prototype.forEach.call(e.length?e:[e],e=>{t.push((e=>{let t=e.querySelector("canvas");return null!==t?t.toDataURL():null})(e))}),t}});return window.CanvasSignature=e});