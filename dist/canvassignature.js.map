{"version":3,"sources":["node_modules/array-each/index.js","node_modules/array-slice/index.js","node_modules/for-own/node_modules/for-in/index.js","node_modules/for-own/index.js","node_modules/isobject/index.js","node_modules/object.defaults/mutable.js","node_modules/object.defaults/immutable.js","node_modules/object.defaults/index.js","src/cavnassignature.js"],"names":["module","each","arr","cb","thisArg","len","length","idx","ele","call","slice","start","end","range","push","pos","Math","max","min","forIn","obj","fn","key","hasOwn","Object","prototype","hasOwnProperty","forOwn","val","isObject","Array","isArray","defaults","target","objects","arguments","immutableDefaults","args","apply","concat","require","assignToElement","element","options","nodeName","toLowerCase","canvas","document","createElement","canvasContext","getContext","drawing","lastPosition","initDom","appendChild","className","width","height","style","addEventListener","startDraw","passive","drawMove","endDraw","event","preventDefault","getDrawPositionByEvent","position","moveTo","x","y","lineTo","stroke","targetTouches","clientX","clientY","clearCanvas","querySelector","clearRect","CanvasSignature","forEach","item","clear","window"],"mappings":"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","file":"canvassignature.js","sourcesContent":["/*!\n * array-each <https://github.com/jonschlinkert/array-each>\n *\n * Copyright (c) 2015, 2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\n/**\n * Loop over each item in an array and call the given function on every element.\n *\n * ```js\n * each(['a', 'b', 'c'], function(ele) {\n *   return ele + ele;\n * });\n * //=> ['aa', 'bb', 'cc']\n *\n * each(['a', 'b', 'c'], function(ele, i) {\n *   return i + ele;\n * });\n * //=> ['0a', '1b', '2c']\n * ```\n *\n * @name each\n * @alias forEach\n * @param {Array} `array`\n * @param {Function} `fn`\n * @param {Object} `thisArg` (optional) pass a `thisArg` to be used as the context in which to call the function.\n * @return {undefined}\n * @api public\n */\n\nmodule.exports = function each(arr, cb, thisArg) {\n  if (arr == null) return;\n\n  var len = arr.length;\n  var idx = -1;\n\n  while (++idx < len) {\n    var ele = arr[idx];\n    if (cb.call(thisArg, ele, idx, arr) === false) {\n      break;\n    }\n  }\n};\n","/*!\n * array-slice <https://github.com/jonschlinkert/array-slice>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function slice(arr, start, end) {\n  var len = arr.length;\n  var range = [];\n\n  start = idx(len, start);\n  end = idx(len, end, len);\n\n  while (start < end) {\n    range.push(arr[start++]);\n  }\n  return range;\n};\n\nfunction idx(len, pos, end) {\n  if (pos == null) {\n    pos = end || 0;\n  } else if (pos < 0) {\n    pos = Math.max(len + pos, 0);\n  } else {\n    pos = Math.min(pos, len);\n  }\n\n  return pos;\n}\n","/*!\n * for-in <https://github.com/jonschlinkert/for-in>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function forIn(obj, fn, thisArg) {\n  for (var key in obj) {\n    if (fn.call(thisArg, obj[key], key, obj) === false) {\n      break;\n    }\n  }\n};\n","/*!\n * for-own <https://github.com/jonschlinkert/for-own>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar forIn = require('for-in');\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nmodule.exports = function forOwn(obj, fn, thisArg) {\n  forIn(obj, function(val, key) {\n    if (hasOwn.call(obj, key)) {\n      return fn.call(thisArg, obj[key], key, obj);\n    }\n  });\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","'use strict';\n\nvar each = require('array-each');\nvar slice = require('array-slice');\nvar forOwn = require('for-own');\nvar isObject = require('isobject');\n\n/**\n * Extends the `target` object with properties of one or\n * more additional `objects`\n *\n * @name .defaults\n * @param  {Object} `target` The target object. Pass an empty object to shallow clone.\n * @param  {Object} `objects`\n * @return {Object}\n * @api public\n */\n\nmodule.exports = function defaults(target, objects) {\n  if (target == null) {\n    return {};\n  }\n\n  each(slice(arguments, 1), function(obj) {\n    if (isObject(obj)) {\n      forOwn(obj, function(val, key) {\n        if (target[key] == null) {\n          target[key] = val;\n        }\n      });\n    }\n  });\n\n  return target;\n};\n","'use strict';\n\nvar slice = require('array-slice');\n\nvar defaults = require('./mutable');\n\n/**\n * Extends an empty object with properties of one or\n * more additional `objects`\n *\n * @name .defaults.immutable\n * @param  {Object} `objects`\n * @return {Object}\n * @api public\n */\n\nmodule.exports = function immutableDefaults() {\n  var args = slice(arguments);\n  return defaults.apply(null, [{}].concat(args));\n};\n","/*!\n * object.defaults <https://github.com/jonschlinkert/object.defaults>\n *\n * Copyright (c) 2014-2015, 2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = require('./mutable');\nmodule.exports.immutable = require('./immutable');\n","\r\nimport defaults from \"object.defaults\";\r\n\r\n/**\r\n * @param {*} element \r\n * @param {*} options \r\n * @returns \r\n */\r\nconst assignToElement = (element, options) => {\r\n    if (\r\n        null === element ||\r\n        \"div\" !== element.nodeName.toLowerCase()\r\n    ) {\r\n        return;\r\n    }\r\n\r\n    let canvas = document.createElement(\"canvas\"),\r\n        canvasContext = canvas.getContext(\"2d\"),\r\n        drawing = false,\r\n        lastPosition = {};\r\n\r\n    const initDom = () => {\r\n        element.appendChild(canvas);\r\n        canvas.className = \"canvasSignature\";\r\n        canvas.width = options.width;\r\n        canvas.height = options.height;\r\n\r\n        canvas.style = \"overscroll-behavior-y: contain;\";\r\n\r\n        // attach canvas events for both desktop and mobile devices\r\n        canvas.addEventListener(\"touchstart\", startDraw, { passive: false });\r\n        canvas.addEventListener(\"touchmove\", drawMove, { passive: false });\r\n        canvas.addEventListener(\"touchend\", endDraw);\r\n        canvas.addEventListener(\"mousedown\", startDraw);\r\n        canvas.addEventListener(\"mousemove\", drawMove);\r\n        canvas.addEventListener(\"mouseup\", endDraw);\r\n    }\r\n\r\n    /**\r\n     * @param {*} event \r\n     */\r\n    const startDraw = (event) => {\r\n        event.preventDefault();\r\n        drawing = true;\r\n        lastPosition = getDrawPositionByEvent(event);\r\n    }\r\n\r\n    /**\r\n     * @param {*} event \r\n     */\r\n    const endDraw = (event) => {\r\n        event.preventDefault();\r\n        drawing = false;\r\n        lastPosition = getDrawPositionByEvent(event);\r\n    }\r\n\r\n    /**\r\n     * @param {*} event \r\n     * @returns \r\n     */\r\n    const drawMove = (event) => {\r\n        if (!drawing) {\r\n            return;\r\n        }\r\n\r\n        event.preventDefault();\r\n\r\n        let position = getDrawPositionByEvent(event);\r\n\r\n        canvasContext.moveTo(lastPosition.x, lastPosition.y);\r\n        canvasContext.lineTo(position.x, position.y);\r\n        canvasContext.stroke();\r\n\r\n        lastPosition = position;\r\n    }\r\n\r\n    /**\r\n     * @param {*} event \r\n     */\r\n    const getDrawPositionByEvent = (event) => {\r\n        let position = {};\r\n\r\n        if (\r\n            event.targetTouches &&\r\n            event.targetTouches.length\r\n        ) {\r\n            position.x = event.targetTouches[0].clientX;\r\n            position.y = event.targetTouches[0].clientY;\r\n        }\r\n\r\n        if (\r\n            event.clientX &&\r\n            event.clientY\r\n        ) {\r\n            position.x = event.clientX;\r\n            position.y = event.clientY; \r\n        }\r\n\r\n        return position;\r\n    }\r\n\r\n    initDom();\r\n}\r\n\r\n/**\r\n * @param {*} element \r\n */\r\nconst clearCanvas = (element) => {\r\n    let canvas = element.querySelector(\"canvas\");\r\n    let canvasContext = canvas.getContext(\"2d\");\r\n\r\n    canvasContext.clearRect(0, 0, canvas.width, canvas.height);\r\n}\r\n\r\n\r\n/**\r\n * @param {*} element \r\n * @param {*} options \r\n */\r\nlet CanvasSignature = (element, options) => {\r\n    // set default options\r\n    options = defaults(options, {\r\n        width: 600,\r\n        height: 600\r\n    });\r\n\r\n    if (element) {\r\n        Array.prototype.forEach.call(\r\n            element.length ? element : [element],\r\n            (item) => {\r\n                assignToElement(item, options);\r\n            }\r\n        )\r\n    }\r\n\r\n    return {\r\n        clear: () => {\r\n            Array.prototype.forEach.call(\r\n                element.length ? element : [element],\r\n                (item) => {\r\n                    clearCanvas(item);\r\n                }\r\n            )\r\n        }\r\n    };\r\n}\r\n\r\nwindow.CanvasSignature = CanvasSignature;\r\n\r\nexport default CanvasSignature;"]}